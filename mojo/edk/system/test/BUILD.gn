# Copyright 2015 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("../../mojo_edk.gni")

mojo_edk_source_set("test") {
  testonly = true

  sources = [
    "random.cc",
    "random.h",
    "scoped_test_dir.cc",
    "scoped_test_dir.h",
    "simple_test_thread.cc",
    "simple_test_thread.h",
    "sleep.cc",
    "sleep.h",
    "stopwatch.cc",
    "stopwatch.h",
    "test_io_thread.cc",
    "test_io_thread.h",
    "timeouts.cc",
    "timeouts.h",
  ]

  mojo_sdk_public_deps = [
    "mojo/public/c/system",
    "mojo/public/cpp/system",
  ]

  deps = [
    "//base",
    "//base/test:test_support",
  ]

  mojo_edk_deps = [
    "mojo/edk/embedder:platform",
    "mojo/edk/util",
  ]
}

mojo_edk_source_set("unittests") {
  testonly = true
  mojo_edk_visibility = [ "mojo/edk/system:mojo_system_unittests" ]

  sources = [
    "random_unittest.cc",
  ]

  deps = [
    ":test",
    "//testing/gtest",
  ]
}
